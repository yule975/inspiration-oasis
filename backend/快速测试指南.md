# çµæ„Ÿç»¿æ´²åç«¯ - å¿«é€Ÿæµ‹è¯•æŒ‡å—

## ğŸš€ ä¸€é”®å¯åŠ¨æµ‹è¯•

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# ç¡®ä¿å·²å®‰è£…å¿…è¦ç¯å¢ƒ
node --version  # >= 18.0.0
psql --version  # PostgreSQL >= 13
redis-cli ping  # Redis (å¯é€‰)
```

### 2. å¿«é€Ÿå¯åŠ¨
```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥

# 4. åˆå§‹åŒ–æ•°æ®åº“
pnpm db:generate
pnpm db:push
pnpm db:seed

# 5. å¯åŠ¨æœåŠ¡
pnpm dev
```

## ğŸ§ª APIæ¥å£æµ‹è¯•

### åŸºç¡€æµ‹è¯•
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:3001/health

# APIä¿¡æ¯
curl http://localhost:3001/api
```

### çµæ„Ÿå¢™åŠŸèƒ½æµ‹è¯•
```bash
# 1. è·å–çµæ„Ÿåˆ—è¡¨
curl "http://localhost:3001/api/ideas?page=1&limit=5"

# 2. å‘å¸ƒæ–°çµæ„Ÿ
curl -X POST http://localhost:3001/api/ideas \
  -H "Content-Type: application/json" \
  -H "X-User-ID: user_001" \
  -H "X-User-Name: æµ‹è¯•ç”¨æˆ·" \
  -d '{
    "content": "æµ‹è¯•çµæ„Ÿï¼šå¼€å‘ä¸€ä¸ªAIé©±åŠ¨çš„ä»£ç å®¡æŸ¥å·¥å…·",
    "tags": ["AI", "å¼€å‘å·¥å…·", "æµ‹è¯•"]
  }'

# 3. ç‚¹èµçµæ„Ÿ (éœ€è¦å…ˆè·å–ä¸€ä¸ªideaçš„ID)
curl -X POST http://localhost:3001/api/ideas/[IDEA_ID]/like \
  -H "X-User-ID: user_002" \
  -H "X-User-Name: å…¶ä»–ç”¨æˆ·"

# 4. æ·»åŠ è¯„è®º
curl -X POST http://localhost:3001/api/ideas/[IDEA_ID]/comments \
  -H "Content-Type: application/json" \
  -H "X-User-ID: user_003" \
  -H "X-User-Name: è¯„è®ºç”¨æˆ·" \
  -d '{
    "content": "è¿™ä¸ªæƒ³æ³•å¾ˆæœ‰åˆ›æ„ï¼Œæˆ‘è§‰å¾—å¯ä»¥åŠ å…¥æ›´å¤šè‡ªåŠ¨åŒ–åŠŸèƒ½ã€‚"
  }'
```

### AIæœåŠ¡åŠŸèƒ½æµ‹è¯•
```bash
# 1. AIå†…å®¹å¢å¼º
curl -X POST http://localhost:3001/api/ai/enhance \
  -H "Content-Type: application/json" \
  -H "X-User-ID: user_001" \
  -d '{
    "content": "åˆ›å»ºä¸€ä¸ªAIåŠ©æ‰‹",
    "type": "expand",
    "context": "æŠ€æœ¯å¼€å‘é¡¹ç›®"
  }'

# 2. æ™ºèƒ½æ€»ç»“
curl -X POST http://localhost:3001/api/ai/summarize \
  -H "Content-Type: application/json" \
  -H "X-User-ID: user_001" \
  -d '{
    "content": "äººå·¥æ™ºèƒ½æŠ€æœ¯æ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œå®ƒåœ¨å„ä¸ªè¡Œä¸šéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚ä»åŒ»ç–—è¯Šæ–­åˆ°è‡ªåŠ¨é©¾é©¶ï¼Œä»è¯­éŸ³è¯†åˆ«åˆ°å›¾åƒå¤„ç†ï¼ŒAIæŠ€æœ¯æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ã€‚ç„¶è€Œï¼Œéšç€AIæŠ€æœ¯çš„æ™®åŠï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å…³æ³¨æ•°æ®éšç§ã€ç®—æ³•å…¬å¹³æ€§ç­‰é—®é¢˜ã€‚",
    "summary_type": "brief"
  }'

# 3. AIå¯¹è¯
curl -X POST http://localhost:3001/api/ai/chat \
  -H "Content-Type: application/json" \
  -H "X-User-ID: user_001" \
  -d '{
    "message": "æˆ‘æƒ³å¼€å‘ä¸€ä¸ªAIä»£ç å®¡æŸ¥å·¥å…·ï¼Œä½ æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ",
    "context": "è½¯ä»¶å¼€å‘å·¥å…·åˆ›æ–°"
  }'

# 4. æ ‡ç­¾æ¨è
curl -X POST http://localhost:3001/api/ai/tags/suggest \
  -H "Content-Type: application/json" \
  -H "X-User-ID: user_001" \
  -d '{
    "content": "å¼€å‘ä¸€ä¸ªåŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½æ¨èç³»ç»Ÿï¼Œèƒ½å¤Ÿåˆ†æç”¨æˆ·è¡Œä¸ºå¹¶æä¾›ä¸ªæ€§åŒ–å†…å®¹æ¨è",
    "max_tags": 5
  }'

# 5. æ¯æ—¥AIç®€æŠ¥
curl "http://localhost:3001/api/ai/brief/daily?date=2023-11-16&categories=AI,æŠ€æœ¯"
```

### èµ„äº§åº“åŠŸèƒ½æµ‹è¯•
```bash
# 1. è·å–èµ„äº§åˆ—è¡¨
curl "http://localhost:3001/api/assets?page=1&limit=5&category=æŠ€æœ¯æ–¹æ¡ˆ"

# 2. åˆ›å»ºæ–°èµ„äº§
curl -X POST http://localhost:3001/api/assets \
  -H "Content-Type: application/json" \
  -H "X-User-ID: user_001" \
  -H "X-User-Name: æµ‹è¯•ç”¨æˆ·" \
  -d '{
    "title": "AIä»£ç å®¡æŸ¥å·¥å…·è®¾è®¡æ–¹æ¡ˆ",
    "description": "åŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½ä»£ç å®¡æŸ¥å·¥å…·å®Œæ•´è®¾è®¡æ–¹æ¡ˆ",
    "content": "# é¡¹ç›®æ¦‚è¿°\n\næœ¬æ–¹æ¡ˆæ—¨åœ¨å¼€å‘ä¸€ä¸ªAIé©±åŠ¨çš„ä»£ç å®¡æŸ¥å·¥å…·...",
    "category": "æŠ€æœ¯æ–¹æ¡ˆ",
    "tags": ["AI", "ä»£ç å®¡æŸ¥", "æœºå™¨å­¦ä¹ "]
  }'

# 3. è·å–åˆ†ç±»åˆ—è¡¨
curl http://localhost:3001/api/assets/categories

# 4. è·å–çƒ­é—¨èµ„äº§
curl "http://localhost:3001/api/assets/popular?limit=5"

# 5. è·å–ç”¨æˆ·èµ„äº§ç»Ÿè®¡
curl http://localhost:3001/api/assets/stats/user \
  -H "X-User-ID: user_001"
```

### æ•°æ®åˆ†æåŠŸèƒ½æµ‹è¯•
```bash
# 1. ä»ªè¡¨æ¿ç»Ÿè®¡æ•°æ®
curl "http://localhost:3001/api/analytics/dashboard?period=week"

# 2. è¶‹åŠ¿åˆ†ææ•°æ®
curl "http://localhost:3001/api/analytics/trends?period=week&type=all"

# 3. AIæ´å¯ŸæŠ¥å‘Š
curl "http://localhost:3001/api/analytics/insights?type=content_quality"

# 4. ç”¨æˆ·æ´»åŠ¨ç»Ÿè®¡
curl "http://localhost:3001/api/analytics/user-activity?period=week" \
  -H "X-User-ID: user_001"

# 5. å›¾è¡¨æ•°æ®
curl "http://localhost:3001/api/analytics/chart-data?metric=ideas&period=week&granularity=day"
```

### æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æµ‹è¯•
```bash
# 1. å•æ–‡ä»¶ä¸Šä¼  (éœ€è¦å‡†å¤‡ä¸€ä¸ªæµ‹è¯•å›¾ç‰‡æ–‡ä»¶)
curl -X POST http://localhost:3001/api/upload \
  -H "X-User-ID: user_001" \
  -F "file=@/path/to/test-image.jpg" \
  -F "type=image" \
  -F "entity_type=IDEA" \
  -F "entity_id=test_entity_id"

# 2. è·å–æ–‡ä»¶ç»Ÿè®¡
curl http://localhost:3001/api/upload/stats \
  -H "X-User-ID: user_001"

# 3. è·å–æ–‡ä»¶åˆ—è¡¨
curl "http://localhost:3001/api/upload/files?page=1&limit=10&type=image"
```

## ğŸ“Š æµ‹è¯•æ•°æ®è¯´æ˜

### åˆå§‹åŒ–æ•°æ®åŒ…å«ï¼š
- **4ä¸ªæµ‹è¯•ç”¨æˆ·**: user_001 åˆ° user_004
- **10æ¡æµ‹è¯•çµæ„Ÿ**: æ¶µç›–AIã€å¼€å‘ã€è®¾è®¡ç­‰é¢†åŸŸ
- **5ä¸ªæµ‹è¯•èµ„äº§**: ä»çµæ„Ÿå½’æ¡£çš„èµ„äº§
- **30+ä¸ªæ ‡ç­¾**: è¦†ç›–å„ä¸ªæŠ€æœ¯é¢†åŸŸ
- **éšæœºè¯„è®ºå’Œç‚¹èµ**: æ¨¡æ‹Ÿç”¨æˆ·äº’åŠ¨
- **7å¤©ç®€æŠ¥æ•°æ®**: AIç®€æŠ¥å†å²è®°å½•
- **30å¤©ç»Ÿè®¡æ•°æ®**: ç³»ç»Ÿä½¿ç”¨ç»Ÿè®¡

### æµ‹è¯•ç”¨æˆ·ä¿¡æ¯ï¼š
```json
{
  "user_001": "å¼ ä¸‰ (zhangsan@example.com)",
  "user_002": "æå›› (lisi@example.com)", 
  "user_003": "ç‹äº” (wangwu@example.com)",
  "user_004": "èµµå…­ (zhaoliu@example.com)"
}
```

## ğŸ” æµ‹è¯•éªŒè¯è¦ç‚¹

### 1. åŸºç¡€åŠŸèƒ½éªŒè¯
- [ ] æœåŠ¡å¯åŠ¨æˆåŠŸï¼Œå¥åº·æ£€æŸ¥é€šè¿‡
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼Œæµ‹è¯•æ•°æ®åŠ è½½å®Œæˆ
- [ ] APIè·¯ç”±æ­£ç¡®å“åº”ï¼Œè¿”å›æ•°æ®æ ¼å¼æ­£ç¡®

### 2. ä¸šåŠ¡é€»è¾‘éªŒè¯
- [ ] çµæ„ŸCRUDæ“ä½œæ­£å¸¸
- [ ] ç‚¹èµå’Œè¯„è®ºåŠŸèƒ½å·¥ä½œæ­£å¸¸
- [ ] èµ„äº§åˆ›å»ºå’Œå½’æ¡£æµç¨‹æ­£ç¡®
- [ ] AIæœåŠ¡å“åº”æ­£å¸¸ï¼ˆæœ‰API Keyï¼‰æˆ–é™çº§æ¨¡æ‹Ÿæ•°æ®

### 3. æ•°æ®ä¸€è‡´æ€§éªŒè¯
- [ ] åˆ›å»ºçµæ„Ÿåï¼Œç»Ÿè®¡æ•°æ®æ›´æ–°
- [ ] ç‚¹èµæ“ä½œåï¼Œè®¡æ•°æ­£ç¡®æ›´æ–°
- [ ] å½’æ¡£æ“ä½œåï¼Œèµ„äº§åº“ä¸­å‡ºç°æ–°è®°å½•
- [ ] æ ‡ç­¾ä½¿ç”¨è®¡æ•°æ­£ç¡®ç´¯è®¡

### 4. æ€§èƒ½å’Œç¼“å­˜éªŒè¯
- [ ] é‡å¤è¯·æ±‚å“åº”æ—¶é—´æ˜æ˜¾æ”¹å–„ï¼ˆç¼“å­˜ç”Ÿæ•ˆï¼‰
- [ ] å¤§é‡æ•°æ®æŸ¥è¯¢å“åº”æ—¶é—´åˆç†
- [ ] å¹¶å‘è¯·æ±‚å¤„ç†æ­£å¸¸

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥PostgreSQLæœåŠ¡
brew services list | grep postgresql
brew services start postgresql

# æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²
echo $DATABASE_URL
psql $DATABASE_URL
```

### 2. Redisè¿æ¥å¤±è´¥ï¼ˆå¯é€‰ï¼‰
```bash
# æ£€æŸ¥RedisæœåŠ¡
redis-cli ping
brew services start redis

# åº”ç”¨ä¼šè‡ªåŠ¨é™çº§åˆ°å†…å­˜ç¼“å­˜
```

### 3. AIæœåŠ¡ä¸å¯ç”¨
```bash
# æ£€æŸ¥APIå¯†é’¥é…ç½®
echo $OPENROUTER_API_KEY

# åº”ç”¨ä¼šè‡ªåŠ¨é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®
```

### 4. æ–‡ä»¶ä¸Šä¼ å¤±è´¥
```bash
# æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
ls -la ./uploads/
mkdir -p ./uploads/{images,documents,other}
chmod 755 ./uploads/
```

## ğŸ¯ æ€§èƒ½åŸºå‡†æµ‹è¯•

### é¢„æœŸå“åº”æ—¶é—´ï¼š
- **å¥åº·æ£€æŸ¥**: < 10ms
- **è·å–çµæ„Ÿåˆ—è¡¨**: < 100ms (é¦–æ¬¡) / < 20ms (ç¼“å­˜)
- **åˆ›å»ºçµæ„Ÿ**: < 200ms
- **AIæœåŠ¡**: < 3000ms (å®é™…API) / < 50ms (æ¨¡æ‹Ÿ)
- **æ•°æ®åˆ†æ**: < 500ms (é¦–æ¬¡) / < 50ms (ç¼“å­˜)
- **æ–‡ä»¶ä¸Šä¼ **: < 1000ms (å–å†³äºæ–‡ä»¶å¤§å°)

### å¹¶å‘æµ‹è¯•å»ºè®®ï¼š
```bash
# ä½¿ç”¨abå·¥å…·è¿›è¡Œå¹¶å‘æµ‹è¯•
ab -n 100 -c 10 http://localhost:3001/api/ideas

# ä½¿ç”¨curlè¿›è¡Œç®€å•å‹åŠ›æµ‹è¯•
for i in {1..10}; do
  curl http://localhost:3001/api/ideas &
done
wait
```

## ğŸ‰ æµ‹è¯•å®Œæˆæ ‡å¿—

å½“ä»¥ä¸‹æ‰€æœ‰æµ‹è¯•é€šè¿‡æ—¶ï¼Œè¯´æ˜åç«¯ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼š

âœ… å¥åº·æ£€æŸ¥è¿”å›æˆåŠŸ  
âœ… èƒ½å¤Ÿè·å–çµæ„Ÿåˆ—è¡¨  
âœ… èƒ½å¤Ÿåˆ›å»ºæ–°çµæ„Ÿ  
âœ… AIæœåŠ¡æ­£å¸¸å“åº”  
âœ… æ•°æ®åˆ†æAPIæ­£å¸¸  
âœ… æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸  
âœ… ç¼“å­˜æœºåˆ¶ç”Ÿæ•ˆ  
âœ… é”™è¯¯å¤„ç†æ­£ç¡®  

**æ­å–œï¼æ‚¨çš„çµæ„Ÿç»¿æ´²åç«¯ç³»ç»Ÿå·²ç»å‡†å¤‡å°±ç»ªï¼** ğŸš€
